From ed6a750d01d9a8a8db03c040d9daa2a5546db037 Mon Sep 17 00:00:00 2001
From: Michael Scott <mike@foundries.io>
Date: Mon, 2 Oct 2023 16:00:12 -0700
Subject: [PATCH 1/2] phytec_am6: enable DFU RAM env settings

Signed-off-by: Michael Scott <mike@foundries.io>
---
 include/configs/phytec_am6_common.h | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/include/configs/phytec_am6_common.h b/include/configs/phytec_am6_common.h
index a2868bd8238..2d83a63bf17 100644
--- a/include/configs/phytec_am6_common.h
+++ b/include/configs/phytec_am6_common.h
@@ -9,6 +9,8 @@
 #ifndef __PHYTEC_AM6_COMMON_H
 #define __PHYTEC_AM6_COMMON_H
 
+#include <environment/ti/k3_dfu.h>
+
 /* DDR Configuration */
 #define CONFIG_SYS_SDRAM_BASE1		0x880000000
 #define CONFIG_SYS_BOOTM_LEN		SZ_64M
@@ -63,10 +65,18 @@
 	"ipaddr=192.168.3.11\0" \
 	"netmask=255.255.255.0\0"
 
+#ifdef CONFIG_DFU_RAM
+#define EXTRA_ENV_DFUARGS \
+	DFU_ALT_INFO_RAM
+#else
+#define EXTRA_ENV_DFUARGS
+#endif
+
 /* Incorporate settings into the U-Boot environment */
 #define CONFIG_EXTRA_ENV_SETTINGS \
 	DEFAULT_LINUX_BOOT_ENV \
 	EXTRA_ENV_SETTINGS \
-	EXTRA_ENV_SETTINGS_MMC
+	EXTRA_ENV_SETTINGS_MMC \
+	EXTRA_ENV_DFUARGS
 
 #endif /* ! __PHYTEC_AM6_COMMON_H */
-- 
2.42.0

