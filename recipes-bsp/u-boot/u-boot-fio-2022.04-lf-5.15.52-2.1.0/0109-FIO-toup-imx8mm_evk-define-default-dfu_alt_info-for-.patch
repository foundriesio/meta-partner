From 3aaf65e6af08efdd61f3a6850d5b27b9441481bd Mon Sep 17 00:00:00 2001
From: Ricardo Salveti <ricardo@foundries.io>
Date: Thu, 7 Oct 2021 22:17:22 -0300
Subject: [PATCH 109/233] [FIO toup] imx8mm_evk: define default dfu_alt_info
 for emmc updates

Define dfu_alt_info to allow updating SPL/imx-boot and u-boot.itb via
DFU (which is also used by EFI capsule updates).

Upstream note: standard SPL seems to be called flash.bin (generated by
u-boot), so needs to be aligned there. Here we're also using the offset
and size for what we consider the first slot (when taking multiboot as
consideration), but that shouldn't be an issue with upstream.

Signed-off-by: Ricardo Salveti <ricardo@foundries.io>
---
 include/configs/imx8mm_evk.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/include/configs/imx8mm_evk.h b/include/configs/imx8mm_evk.h
index 3e7ace495ff..43b8cc338d2 100644
--- a/include/configs/imx8mm_evk.h
+++ b/include/configs/imx8mm_evk.h
@@ -144,6 +144,8 @@
 	"fdt_addr=0x43000000\0"			\
 	"fdt_high=0xffffffffffffffff\0"		\
 	"boot_fit=no\0" \
+	"dfu_alt_info=mmc 2=imx-boot raw 0x42 0x250 mmcpart 1;" \
+		"u-boot-itb raw 0x300 0xD00 mmcpart 1\0" \
 	"fdtfile=" CONFIG_DEFAULT_FDT_FILE "\0" \
 	"bootm_size=0x10000000\0" \
 	"mmcdev="__stringify(CONFIG_SYS_MMC_ENV_DEV)"\0" \
-- 
2.25.1

